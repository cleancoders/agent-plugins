<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agent Swarm Dashboard</title>
<link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/css/layout.css">
<link rel="stylesheet" href="/css/cards.css">
<link rel="stylesheet" href="/css/log.css">
<link rel="stylesheet" href="/css/modal.css">
<link rel="stylesheet" href="/css/diff.css">
</head>
<body>

<div class="completion-banner" id="completion-banner" style="display:none">
  <h2>All Tasks Complete!</h2>
  <p id="completion-time"></p>
</div>

<div class="connecting-overlay" id="connecting-overlay">
  <div>
    <div class="live-indicator" style="justify-content:center;margin-bottom:12px;font-size:14px">
      <div class="live-dot"></div> Connecting to dashboard...
    </div>
    <div style="text-align:center;font-size:12px;color:var(--text-dim)">Waiting for kanban_init</div>
  </div>
</div>

<header>
  <div class="header-left">
    <div class="live-indicator"><div class="live-dot"></div> LIVE</div>
    <h1 id="dashboard-title">Dashboard <span id="dashboard-subtitle"></span></h1>
  </div>
  <div class="header-stats">
    <div class="stat">
      <div class="stat-value" id="stat-agents" style="color:var(--blue)">0</div>
      <div class="stat-label">Active</div>
    </div>
    <div class="stat">
      <div class="stat-value" id="stat-done" style="color:var(--green)">0</div>
      <div class="stat-label">Done</div>
    </div>
    <div class="stat">
      <div class="stat-value" id="stat-total" style="color:var(--text-muted)">10</div>
      <div class="stat-label">Total</div>
    </div>
    <div class="stat">
      <div class="stat-value" id="stat-findings" style="color:var(--yellow)">0</div>
      <div class="stat-label">Findings</div>
    </div>
    <div class="elapsed" id="elapsed">00:00:00</div>
  </div>
</header>

<div class="progress-container">
  <div class="progress-bar-bg">
    <div class="progress-bar-fill" id="progress-fill"></div>
  </div>
  <div class="progress-text" id="progress-text">0% complete</div>
</div>

<div class="agent-bar" id="agent-bar">
  <span class="agent-bar-label">Agents</span>
</div>

<div class="board" id="board">
  <div class="column col-blocked" id="col-blocked">
    <div class="column-header">
      <span class="column-title">Blocked</span>
      <span class="column-count" id="count-blocked">0</span>
    </div>
    <div class="column-cards" id="cards-blocked"></div>
  </div>
  <div class="column col-ready" id="col-ready">
    <div class="column-header">
      <span class="column-title">Ready</span>
      <span class="column-count" id="count-ready">0</span>
    </div>
    <div class="column-cards" id="cards-ready"></div>
  </div>
  <div class="column col-progress" id="col-progress">
    <div class="column-header">
      <span class="column-title">In Progress</span>
      <span class="column-count" id="count-progress">0</span>
    </div>
    <div class="column-cards" id="cards-progress"></div>
  </div>
  <div class="column col-done" id="col-done">
    <div class="column-header">
      <span class="column-title">Done</span>
      <span class="column-count" id="count-done">0</span>
    </div>
    <div class="column-cards" id="cards-done"></div>
  </div>
</div>

<div class="log-panel" id="log-panel">
  <div class="log-title">Activity Log</div>
  <div id="log-entries"></div>
</div>

<div class="modal-overlay" id="task-modal" onclick="if(event.target===this)closeModal()">
  <div class="modal-content">
    <div class="modal-header">
      <div class="modal-header-left">
        <span class="modal-id" id="modal-id"></span>
        <span class="modal-status" id="modal-status"></span>
      </div>
      <button class="modal-close" onclick="closeModal()">&times;</button>
    </div>
    <div class="modal-title" id="modal-title"></div>
    <div class="modal-body" id="modal-body"></div>
  </div>
</div>

<div class="diff-modal-overlay" id="diff-modal" onclick="if(event.target===this)closeDiffModalFull()">
  <div class="diff-modal-content">
    <div class="diff-modal-header">
      <button class="diff-modal-back" onclick="closeDiffModal()">&#8592; Back to Task</button>
      <span class="diff-modal-filename" id="diff-modal-filename"></span>
      <button class="modal-close" onclick="closeDiffModalFull()">&times;</button>
    </div>
    <div class="diff-modal-body">
      <div class="diff-modal-sidebar" id="diff-modal-sidebar"></div>
      <div class="diff-modal-main" id="diff-modal-main">
        <div class="diff-loading">Select a file to view changes</div>
      </div>
    </div>
  </div>
</div>

<script src="/js/dashboard.js"></script>
<script src="/js/diff.js"></script>
<script src="/js/modal.js"></script>
</body>
</html>
